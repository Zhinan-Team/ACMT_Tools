(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9ab86930"],{"075a":function(e,t,s){},"35c9":function(e,t,s){"use strict";s("d277")},"6de6":function(e,t,s){},c0c1:function(e,t,s){"use strict";s("6de6")},d277:function(e,t,s){},ecac:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[e.user?s("div",[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:24,xs:24}},[s("el-card",[s("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[s("el-tab-pane",{attrs:{label:"Account",name:"account"}},[s("account",{attrs:{user:e.user}})],1)],1)],1)],1)],1)],1):e._e()])},r=[],o=s("5530"),n=(s("a15b"),s("b0c0"),s("2f62")),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",{staticStyle:{"margin-bottom":"20px"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[e._v("About me")])]),s("div",{staticClass:"user-profile"},[s("div",{staticClass:"box-center"},[s("pan-thumb",{attrs:{image:e.user.avatar,height:"100px",width:"100px",hoverable:!1}},[s("div",[e._v("Hello")]),e._v(" "+e._s(e.user.role)+" ")])],1),s("div",{staticClass:"box-center"},[s("div",{staticClass:"user-name text-center"},[e._v(e._s(e.user.name))]),s("div",{staticClass:"user-role text-center text-muted"},[e._v(e._s(e._f("uppercaseFirst")(e.user.role)))])])]),s("div",{staticClass:"user-bio"})])},l=[],c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pan-item",style:{zIndex:e.zIndex,height:e.height,width:e.width}},[s("div",{staticClass:"pan-info"},[s("div",{staticClass:"pan-info-roles-container"},[e._t("default")],2)]),s("div",{staticClass:"pan-thumb",style:{backgroundImage:"url("+e.image+")"}})])},d=[],u=(s("a9e3"),{name:"PanThumb",props:{image:{type:String,required:!0},zIndex:{type:Number,default:1},width:{type:String,default:"150px"},height:{type:String,default:"150px"}}}),m=u,p=(s("c0c1"),s("2877")),f=Object(p["a"])(m,c,d,!1,null,"799537af",null),w=f.exports,h={components:{PanThumb:w},props:{user:{type:Object,default:function(){return{name:"",email:"",avatar:"",role:""}}}}},b=h,v=(s("fda5"),Object(p["a"])(b,i,l,!1,null,"9f6f062e",null)),P=v.exports,g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"block"},[s("el-timeline",e._l(e.timeline,(function(t,a){return s("el-timeline-item",{key:a,attrs:{timestamp:t.timestamp,placement:"top"}},[s("el-card",[s("h4",[e._v(e._s(t.title))]),s("p",[e._v(e._s(t.content))])])],1)})),1)],1)},_=[],x={data:function(){return{timeline:[{timestamp:"2019/4/20",title:"Update Github template",content:"PanJiaChen committed 2019/4/20 20:46"},{timestamp:"2019/4/21",title:"Update Github template",content:"PanJiaChen committed 2019/4/21 20:46"},{timestamp:"2019/4/22",title:"Build Template",content:"PanJiaChen committed 2019/4/22 20:46"},{timestamp:"2019/4/23",title:"Release New Version",content:"PanJiaChen committed 2019/4/23 20:46"}]}}},F=x,y=Object(p["a"])(F,g,_,!1,null,null,null),C=y.exports,I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-form",[s("el-form-item",{attrs:{label:"Name"}},[s("el-input",{model:{value:e.personalForm.name,callback:function(t){e.$set(e.personalForm,"name","string"===typeof t?t.trim():t)},expression:"personalForm.name"}})],1),s("el-form-item",{attrs:{label:"Mobile Phone"}},[s("el-input",{model:{value:e.personalForm.mobile,callback:function(t){e.$set(e.personalForm,"mobile","string"===typeof t?t.trim():t)},expression:"personalForm.mobile"}})],1),s("el-form-item",{attrs:{label:"Email"}},[s("el-input",{model:{value:e.personalForm.email,callback:function(t){e.$set(e.personalForm,"email","string"===typeof t?t.trim():t)},expression:"personalForm.email"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("Update")])],1)],1),s("el-form",[s("el-form-item",{attrs:{label:"Account Safety"}}),s("el-form-item",[s("div",{staticClass:"personal-edit-safe-item-left-value"},[e._v("Current password strength: Strong")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.passwordFormShow=!0}}},[e._v("Update Password")])],1)],1),s("el-dialog",{attrs:{visible:e.passwordFormShow,title:"Password modification"},on:{"update:visible":function(t){e.passwordFormShow=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[s("span",{staticClass:"dialog-footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.settingPassword}},[s("i",{staticClass:"fa fa-check"}),e._v("Submit ")])],1)]},proxy:!0}])},[s("el-form",{ref:"userPasswordFormRef",attrs:{model:e.userPasswordInfo,"required-asterisk":"","label-width":"100px","label-position":"left",rules:e.passwordRules,center:""}},[s("el-form-item",{attrs:{label:"Original password",required:"",prop:"oldPassword"}},[s("el-input",{attrs:{placeholder:"Please enter the original password",clearable:""},model:{value:e.userPasswordInfo.oldPassword,callback:function(t){e.$set(e.userPasswordInfo,"oldPassword",t)},expression:"userPasswordInfo.oldPassword"}})],1),s("el-form-item",{attrs:{required:"",prop:"newPassword",label:"New password"}},[s("el-input",{attrs:{type:"password",placeholder:"Please enter a new password","show-password":"",clearable:""},model:{value:e.userPasswordInfo.newPassword,callback:function(t){e.$set(e.userPasswordInfo,"newPassword",t)},expression:"userPasswordInfo.newPassword"}})],1),s("el-form-item",{attrs:{required:"",prop:"newPassword2",label:"Confirm password"}},[s("el-input",{attrs:{type:"password",placeholder:"Please enter a new password again","show-password":"",clearable:""},model:{value:e.userPasswordInfo.newPassword2,callback:function(t){e.$set(e.userPasswordInfo,"newPassword2",t)},expression:"userPasswordInfo.newPassword2"}})],1)],1)],1)],1)},$=[],k=(s("d9e2"),s("14d9"),s("4d63"),s("c607"),s("ac1f"),s("2c3e"),s("00b4"),s("25f0"),{data:function(){var e=this,t=function(t,s,a){var r=new RegExp("(?=.*[0-9])(?=.*[a-zA-Z]).{8,30}");""===s?a(new Error("Please input new password")):s===e.userPasswordInfo.oldPassword?a(new Error("The original password matches the new password")):r.test(s)?a():a(new Error("Your password complexity is too low (the password must contain letters, numbers, and be no less than 8 in length)"))},s=function(t,s,a){""===s?a(new Error("Please input new password again")):s!==e.userPasswordInfo.newPassword?a(new Error("The password entered twice is inconsistent!")):a()};return{personalForm:{avatar:"",username:"",name:"",email:"",mobile:"",gender:"",dept_info:{dept_id:0,dept_name:""},role_info:[{id:0,name:""}]},passwordFormShow:!1,userPasswordFormRef:"",userPasswordInfo:{oldPassword:"",newPassword:"",newPassword2:""},passwordRules:{oldPassword:[{required:!0,message:"Please enter the original password",trigger:"blur"}],newPassword:[{validator:t,trigger:"blur"}],newPassword2:[{validator:s,trigger:"blur"}]}}},mounted:function(){this.getUserInfo()},methods:{getUserInfo:function(){var e=this;this.$store.dispatch("user/getInfo").then((function(t){console.log("success"),console.log(t),e.personalForm.avatar=t.avatar||"",e.personalForm.username=t.username||"",e.personalForm.name=t.name||"",e.personalForm.email=t.email||"",e.personalForm.mobile=t.mobile||"",e.personalForm.gender=t.gender,e.personalForm.role_info=t.role_info||[]}))},settingPassword:function(){var e=this;this.$refs.userPasswordFormRef.validate((function(t){t?e.updatePassword():e.$message.error("Form verification failed, please check")}))},updatePassword:function(){var e=this;this.$store.dispatch("user/updatePassword",this.userPasswordInfo).then((function(t){e.$message({type:"success",message:"success"}),setTimeout((function(){e.$store.dispatch("user/logout"),e.$router.push("/login?redirect=".concat(e.$route.fullPath))}),1e3)}))},submitForm:function(){var e=this;console.log("yes!",this.personalForm),this.$store.dispatch("user/updateUserInfo",this.personalForm).then((function(t){console.log("app:",t),"2000"===t.code&&e.$message({type:"success",message:"success"}),e.getUserInfo()}))}}}),E=k,S=(s("35c9"),Object(p["a"])(E,I,$,!1,null,"21ce1c52",null)),T=S.exports,U={name:"Profile",components:{UserCard:P,Timeline:C,Account:T},data:function(){return{user:{},activeTab:"account"}},computed:Object(o["a"])({},Object(n["b"])(["name","avatar","roles"])),created:function(){this.getUser()},methods:{getUser:function(){this.user={name:this.name,role:this.roles.join(" | "),email:"admin@test.com",avatar:this.avatar}}}},j=U,O=Object(p["a"])(j,a,r,!1,null,null,null);t["default"]=O.exports},fda5:function(e,t,s){"use strict";s("075a")}}]);